<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gerador de Plano de Aula</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: 'Times New Roman', Times, serif; font-size:12px; line-height:1.5; background:#f6f6f6; }
    .container { width:100%; max-width:900px; margin:12px auto; background:white; padding:12px; box-shadow:0 2px 6px rgba(0,0,0,.08);}
    h2,h3 { text-align:center; margin:8px 0; font-size:16px;}
    label { display:block; margin-top:6px; font-size:12px;}
    input, select, textarea, button { width:100%; padding:6px; margin-top:4px; border:1px solid #ccc; border-radius:4px; font-size:12px; box-sizing:border-box;}
    button { background:#007bff; color:#fff; cursor:pointer; font-weight:600;}
    button.secondary { background:#28a745; }
    button.warn { background:#ffc107; color:#000;}
    .row { display:flex; gap:8px; flex-wrap:wrap; }
    .col { flex:1; min-width:200px; padding:6px; }
    table { width:100%; border-collapse:collapse; margin-top:10px; font-size:12px; background:#fff;}
    th,td { border:1px solid #999; padding:6px; vertical-align:top; text-align:left; }
    th { background:#0069d9; color:#fff; font-weight:700; text-transform:uppercase; font-size:11px;}
    td[contenteditable="true"] { outline: none; }
    #mensagem { margin-top:8px; font-size:13px; color:#0b6; }
    .novoBloco { border:1px dashed #007bff; padding:8px; margin-top:10px; }
    #botaoSalvarAnexoInferior { display:none; margin-top:10px;}
    .small { font-size:11px; color:#555; margin-top:4px;}
    /* Estilo para os selects de m√©todo de ensino */
    .metodoSelect {
      width: 100%;
      font-size: 11px;
      padding: 2px;
      border: 1px solid #ccc;
      border-radius: 2px;
    }
    /* Impedir sele√ß√£o de texto apenas no preview final (#planoFinal) */
#planoFinal {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Exce√ß√£o: permitir edi√ß√£o/sele√ß√£o nos campos configurados como edit√°veis */
#planoFinal input,
#planoFinal textarea,
#planoFinal select,
#planoFinal [contenteditable="true"] {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}
  </style>
</head>
<body>
  <div class="container">
    <h2>GERADOR DE PLANO DE AULA</h2>

    <form name="planoForm" onsubmit="event.preventDefault()">
      <div class="row">
        <div class="col">
          <label>Escola:</label><input type="text" name="escola" required />
          <label>Nome do Professor:</label><input type="text" name="professor" required />
          <label>Disciplina:</label><input type="text" name="disciplina" required />
          <label>Unidade Tem√°tica:</label><input type="text" name="unidade" required />
          <label>Tema da Aula:</label><input type="text" name="tema" required maxlength="100" />
          <label>Tipo de Aula:</label><input type="text" name="tipo" required />
        </div>

        <div class="col">
          <label>Classe:</label>
          <select name="classe" required>
            <option value="">Selecione a classe</option>
            <option value="1¬™">1¬™ Classe</option><option value="2¬™">2¬™ Classe</option><option value="3¬™">3¬™ Classe</option>
            <option value="4¬™">4¬™ Classe</option><option value="5¬™">5¬™ Classe</option><option value="6¬™">6¬™ Classe</option>
            <option value="7¬™">7¬™ Classe</option><option value="8¬™">8¬™ Classe</option><option value="9¬™">9¬™ Classe</option>
            <option value="10¬™">10¬™ Classe</option><option value="11¬™">11¬™ Classe</option><option value="12¬™">12¬™ Classe</option>
          </select>
          <label>Turma:</label><input type="text" name="turma" required />
          <label>Li√ß√£o n¬∫:</label><input type="number" name="licao" min="1" step="1" />
          <label>Dura√ß√£o:</label>
          <select name="duracao" required><option value="45">45 minutos</option><option value="90">90 minutos</option></select>
          <label>Data:</label><input type="date" name="data" required/>
          <label style="margin-top:8px;"><input type="checkbox" id="usarMateriais" onchange="alternarCampoMaterial()"> Aula exige material did√°tico?</label>
          <div id="adicionarMaterialDiv" style="display:none;">
            <label>Adicionar material:</label>
            <div style="display:flex; gap:8px;">
              <input type="text" id="inputMaterial" placeholder="Ex: cartaz, marcador">
              <button type="button" onclick="adicionarMaterial()" style="width:120px;">Adicionar</button>
            </div>
            <ul id="listaMateriais" style="font-size:12px; margin-top:8px;"></ul>
          </div>
        </div>
      </div>

      <div style="margin-top:8px;">
        <label>Objetivos Espec√≠ficos:</label>
        <textarea id="objetivosCampo" name="objetivos" required style="height:90px;"></textarea>
        <div style="display:flex; gap:8px; margin-top:6px;">
          <button type="button" class="secondary" onclick="gerarObjetivosLocal()" style="width:140px;">Gerar Objetivos</button>
          <button type="button" class="warn" onclick="gerarNovosObjetivos()" style="width:120px;">üîÑ Gerar Novos</button>
        </div>
      </div>

      <div style="margin-top:10px;">
        <button type="button" onclick="iniciarGeracaoPlano()">Gerar Plano de Aula</button>
      </div>
    </form>

    <div id="avisoExportacao" class="small" style="display:none;color:#c00;">‚ö†Ô∏è Exporte o plano em modo horizontal para melhor visualiza√ß√£o em PDF.</div>
    <div id="mensagem"></div>

<!-- Bot√£o voltar ao formul√°rio -->
<button id="btnVoltarFormulario" onclick="voltarAoFormulario()" style="display:none; margin-bottom:10px;">
  Voltar ao Formul√°rio üëÜ
</button>

<!-- PREVIEW / PLANO -->
<div id="planoFinal" style="display:none; margin-top:16px;">
  <h3>PLANO DE AULA</h3>
      <div class="row">
        <div class="col" id="dadosEsquerda"></div>
        <div class="col" id="dadosDireita"></div>
      </div>

      <h4>Objetivos Espec√≠ficos:</h4>
      <ul id="listaObjetivos"></ul>

      <table id="tabelaPlano" aria-label="Tabela do plano">
        <thead>
          <tr>
            <th>TEMPO</th>
            <th>FUN√á√ïES DID√ÅCTICAS</th>
            <th>CONTE√öDOS</th>
            <th>ACTIVIDADES DO PROFESSOR</th>
            <th>ACTIVIDADES DOS ALUNOS</th>
            <th>M√âTODOS DE ENSINO</th>
            <th>MEIOS DE ENSINO</th>
          </tr>
        </thead>
        <tbody id="tabelaCorpo"></tbody>
      </table>

      <div style="margin-top:10px;">
        <button type="button" onclick="abrirNovoBloco()">+ Adicionar Actividade</button>
        <div id="novoBlocoContainer"></div>
      </div>

      <div id="selecaoTipoAnexo" style="margin-top:12px;">
        <label><strong>Como deseja adicionar o anexo?</strong></label>
        <select id="tipoAnexo" onchange="alternarTipoAnexo()">
          <option value="imagem">Imagem (foto do livro)</option>
          <option value="texto">Texto explicativo</option>
        </select>
      </div>

      <div id="opcaoImagem" style="margin-top:8px;">
        <input type="file" id="inputImagem" accept="image/*" capture="environment" onchange="mostrarImagem(event)">
        <img id="visualizarImagem" src="" alt="Pr√©-visualiza√ß√£o" style="display:none; max-width:100%; margin-top:8px;"/>
        <div style="margin-top:6px;">
          <button type="button" onclick="salvarAnexo('imagem')">Salvar Anexo (Imagem)</button>
        </div>
      </div>

      <div id="opcaoTexto" style="display:none; margin-top:8px;">
        <label for="textoAnexo"><strong>Digite o conte√∫do do anexo:</strong></label>
        <textarea id="textoAnexo" placeholder="Ex: resumo do conte√∫do..." style="width:100%; height:90px;"></textarea>
        <div style="margin-top:6px;">
          <button type="button" onclick="salvarAnexo('texto')">Salvar Anexo (Texto)</button>
        </div>
      </div>

      <div style="margin-top:8px;">
        <button id="botaoSalvarAnexoInferior" type="button" onclick="salvarAnexo()" >Salvar Anexo</button>
      </div>

      <div style="margin-top:10px;">
        <button type="button" onclick="atualizarPlanoSalvo()">Atualizar / Salvar Plano</button>
        <button type="button" onclick="irParaPagamento()" style="margin-left:8px;">Exportar para PDF</button>
      </div>
    </div>
  </div>
<!-- LOADER MODERNO -->
<div id="loaderPlano" style="display:none; flex-direction: column; align-items: center; justify-content: center; margin:20px 0;">
  <div class="circle" style="width:120px; height:120px; border:10px solid #ddd; border-top:10px solid #4CAF50; border-radius:50%; position:relative; animation: spin 1s linear infinite;">
    <div class="percentage" id="percentText" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:20px; font-weight:bold;">0%</div>
  </div>
  <div class="message" id="loaderMessage" style="margin-top:20px; font-size:16px; font-style:italic;">Iniciando...</div>
</div>

<style>
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
<script>
/* ---------- dados e constantes ---------- */
const verbosCognitivos = ["identificar","descrever","classificar","definir","explicar","relacionar","enumerar","comparar","analisar","sintetizar"];
const verbosPsicomotores = ["desenhar","montar","construir","organizar","manipular","demonstrar","executar","medir","simular","experimentar"];
const verbosAfetivos = ["valorizar","respeitar","cooperar","participar","aceitar","comprometer-se","defender","refletir","apreciar","internalizar"];

const metodosEnsino = [
  "Elabora√ß√£o conjunta","Expositivo-Explicativo","Trabalho Independente",
  "Trabalho em Grupo","Participativo / Interativo","Demonstrativo / Pr√°tico",
  "Resolu√ß√£o de Problemas"
];

let materiais = [];
let imagemDataURL = null;
let anexoSalvo = null;

// ======= Bloquear c√≥pia s√≥ no preview =======
(function(){
  const plano = document.getElementById('planoFinal');
  if (!plano) return;

  // Bloqueia clique direito dentro do preview
  plano.addEventListener('contextmenu', function(e){
    e.preventDefault();
  });

  // Bloqueia Ctrl+C, Ctrl+X, Ctrl+U apenas no preview
  document.addEventListener('keydown', function(e){
    const inside = plano.contains(document.activeElement) || plano === document.activeElement;
    if (!inside) return;
    if ((e.ctrlKey || e.metaKey) && ["c","x","s","u"].includes(e.key.toLowerCase())) {
      e.preventDefault();
    }
  });
})();

/* ---------- utilit√°rios ---------- */
function escapeHtml(str){
  if (!str) return '';
  return String(str).replace(/&/g,'&amp;').replace(/</g,'<').replace(/>/g,'>').replace(/"/g,'&quot;');
}

function mostrarMensagem(msg){
  const el = document.getElementById('mensagem');
  el.textContent = msg;
  el.style.color = '#0b6';
  setTimeout(()=>el.textContent='', 4000);
}

function criarSelectMetodo(selected){
  let s = '<select class="metodoSelect">';
  for (const m of metodosEnsino){
    s += `<option value="${m}" ${m === selected ? 'selected' : ''}>${m}</option>`;
  }
  s += '</select>';
  return s;
}

/* ---------- Materiais ---------- */
function alternarCampoMaterial(){
  document.getElementById('adicionarMaterialDiv').style.display = document.getElementById('usarMateriais').checked ? 'block' : 'none';
}

function adicionarMaterial(){
  const input = document.getElementById('inputMaterial');
  const valor = input.value.trim();
  if (!valor) { 
    alert('Escreve o material antes de adicionar.'); 
    return; 
  }
  materiais.push(valor);
  const li = document.createElement('li');
  li.textContent = valor;
  document.getElementById('listaMateriais').appendChild(li);
  input.value = '';
  mostrarMensagem('Material adicionado.');
}

/* ---------- Objetivos ---------- */
function gerarObjetivosLocal(){
  const tema = document.forms['planoForm'].tema.value.trim();
  if (!tema){ 
    alert("Por favor, preencha o tema da aula primeiro."); 
    return; 
  }
  gerarNovosObjetivos();
}

function gerarNovosObjetivos(){
  const tema = document.forms['planoForm'].tema.value.trim();
  if (!tema) return;

  const vC = verbosCognitivos[Math.floor(Math.random()*verbosCognitivos.length)];
  const vP = verbosPsicomotores[Math.floor(Math.random()*verbosPsicomotores.length)];
  const vA = verbosAfetivos[Math.floor(Math.random()*verbosAfetivos.length)];

  const objetivos = [
    `${vC.charAt(0).toUpperCase()+vC.slice(1)} os conceitos fundamentais de "${tema}"`,
    `${vP.charAt(0).toUpperCase()+vP.slice(1)} uma atividade pr√°tica relacionada a "${tema}"`,
    `${vA.charAt(0).toUpperCase()+vA.slice(1)} a import√¢ncia de "${tema}" no contexto social`
  ];

  document.getElementById('objetivosCampo').value = objetivos.join(";\n");
  mostrarMensagem('Objetivos gerados.');
}
function mostrarLoader(callback) {
  const loader = document.getElementById('loaderPlano');
  const percentText = document.getElementById('percentText');
  const loaderMessage = document.getElementById('loaderMessage');

  loader.style.display = 'flex';

  let progress = 0;
  const messages = [
    { msg: "Coletando Dados...", perc: 25 },
    { msg: "Fazendo o Plano de Aula...", perc: 50 },
    { msg: "Determinando M√©todos de Ensino...", perc: 75 },
    { msg: "Finalizando o Plano...", perc: 100 }
  ];
  let currentMsgIndex = 0;

  const interval = setInterval(() => {
    progress++;
    percentText.textContent = progress + '%';

    if (progress >= messages[currentMsgIndex].perc) {
      loaderMessage.textContent = messages[currentMsgIndex].msg;
      currentMsgIndex++;
    }

    if (progress >= 100) {
      clearInterval(interval);
      setTimeout(() => {
        loader.style.display = 'none';
        if (callback) callback(); // mostra o plano depois do loader
      }, 500);
    }
  }, 60); // ‚Üê alterado para 60ms por incremento ‚Üí ~6s total
}

function iniciarGeracaoPlano() {
  document.forms['planoForm'].style.display = 'none';
  document.getElementById('planoFinal').style.display = 'none';
  
  mostrarLoader(gerarPlano);
}
/* ---------- Gerar Plano ---------- */
function gerarPlano(){
  const form = document.forms['planoForm'];

  // Valida√ß√£o
  const requiredFields = ['escola', 'professor', 'disciplina', 'tema', 'classe', 'turma', 'duracao', 'data'];
  for (const fieldName of requiredFields) {
    if (!form[fieldName].value.trim()) {
      alert(`O campo "${fieldName}" √© obrigat√≥rio.`);
      form[fieldName].focus();
      return;
    }
  }

  // Cabe√ßalhos
  document.getElementById('dadosEsquerda').innerHTML = `
    <p><strong>Escola:</strong> ${escapeHtml(form.escola.value)}</p>
    <p><strong>Professor:</strong> ${escapeHtml(form.professor.value)}</p>
    <p><strong>Disciplina:</strong> ${escapeHtml(form.disciplina.value)}</p>
    <p><strong>Unidade Tem√°tica:</strong> ${escapeHtml(form.unidade.value)}</p>
    <p><strong>Tema:</strong> ${escapeHtml(form.tema.value)}</p>
    <p><strong>Tipo de Aula:</strong> ${escapeHtml(form.tipo.value)}</p>`;

  document.getElementById('dadosDireita').innerHTML = `
    <p><strong>Classe:</strong> ${escapeHtml(form.classe.value)}</p>
    <p><strong>Turma:</strong> ${escapeHtml(form.turma.value)}</p>
    <p><strong>Li√ß√£o n¬∫:</strong> ${escapeHtml(form.licao.value || "‚Äî")}</p>
    <p><strong>Dura√ß√£o:</strong> ${escapeHtml(form.duracao.value)} minutos</p>
    <p><strong>Data:</strong> ${form.data.value}</p>
    ${materiais.length ? `<p><strong>Materiais:</strong><br>${materiais.map(m => `‚Ä¢ ${escapeHtml(m)}`).join('<br>')}</p>` : ''}`;

  // Objetivos
  const objetivosText = form.objetivos.value.trim();
  document.getElementById('listaObjetivos').innerHTML = objetivosText ? objetivosText.split(';\n').map(l=>`<li>${escapeHtml(l)}</li>`).join('') : '';

  // --- TABELA (CORPO) ---
  const classeNum = String(form.classe.value || '').replace(/[^\d]/g,'');
  const isClasseInicial = (classeNum === '1' || classeNum === '2');
  const meiosEnsinoIniciais = 'Livro do aluno';
  const meiosEnsinoNormais = 'Quadro, giz, livro do aluno, esferogr√°fica';
  const duracao = parseInt(form.duracao.value || 45, 10);
  const fator = duracao === 90 ? 2 : 1;
  const tempo1 = `${5 * fator} min`, tempo2 = `${20 * fator} min`, tempo3 = `${10 * fator} min`, tempo4 = `${10 * fator} min`;

  const tabelaCorpo = document.getElementById('tabelaCorpo');
  tabelaCorpo.innerHTML = `
    <tr data-funcao="Introdu√ß√£o e Motiva√ß√£o">
      <td>${escapeHtml(tempo1)}</td>
      <td><strong>Introdu√ß√£o e Motiva√ß√£o</strong></td>
      <td contenteditable="true">‚Ä¢ Sauda√ß√£o<br>‚Ä¢ Marca√ß√£o de presen√ßa<br>‚Ä¢ Recapitula√ß√£o da aula anterior<br>‚Ä¢ Apresenta√ß√£o do tema "${escapeHtml(form.tema.value)}"</td>
      <td contenteditable="true">‚Ä¢ Sa√∫da os alunos<br>‚Ä¢ Faz a marca√ß√£o de presen√ßas<br>‚Ä¢ Orienta a recapitula√ß√£o da aula anterior<br>‚Ä¢ Introduz o tema "${escapeHtml(form.tema.value)}"</td>
      <td contenteditable="true">‚Ä¢ Sa√∫dam o professor<br>‚Ä¢ Confirma a presen√ßa<br>‚Ä¢ Recapitulam a aula anterior sob orienta√ß√£o do professor<br>‚Ä¢ Anotam o tema</td>
      <td>${criarSelectMetodo("Elabora√ß√£o conjunta")}</td>
      <td contenteditable="true">${isClasseInicial ? meiosEnsinoIniciais : meiosEnsinoNormais}</td>
    </tr>
    <tr data-funcao="Media√ß√£o e Assimila√ß√£o">
      <td>${escapeHtml(tempo2)}</td>
      <td>Media√ß√£o e Assimila√ß√£o</td>
      <td contenteditable="true">‚Ä¢ Explora√ß√£o dos poss√≠veis pressupostos dos alunos<br>‚Ä¢ Explica√ß√£o do tema "${escapeHtml(form.tema.value)}"<br>‚Ä¢ Esclarecimento das poss√≠veis d√∫vidas</td>
      <td contenteditable="true">‚Ä¢ Explora poss√≠veis ideias dos alunos<br>‚Ä¢ Explica o conte√∫do<br>‚Ä¢ Procura sanar as poss√≠veis d√∫vidas<br>‚Ä¢ Passa o apontamento no quadro</td>
      <td contenteditable="true">‚Ä¢ Exp√µem as poss√≠veis ideias<br>‚Ä¢ Prestam aten√ß√£o na explica√ß√£o<br>‚Ä¢ Exp√µem as poss√≠veis d√∫vidas relacionadas ao tema<br>‚Ä¢ Transcrevem o apontamento para os seus cadernos</td>
      <td>${criarSelectMetodo("Elabora√ß√£o conjunta")}</td>
      <td contenteditable="true">${isClasseInicial ? meiosEnsinoIniciais : 'Quadro, giz, livro do aluno, cartaz'}</td>
    </tr>
    <tr data-funcao="Dom√≠nio e Consolida√ß√£o">
      <td>${escapeHtml(tempo3)}</td>
      <td>Dom√≠nio e Consolida√ß√£o</td>
      <td contenteditable="true">Exerc√≠cios sobre aplica√ß√£o</td>
      <td contenteditable="true">‚Ä¢ Passa os exerc√≠cios no quadro<br>‚Ä¢ Orienta a resolu√ß√£o dos exerc√≠cios<br>‚Ä¢ Passa de carteira em carteira a verificar a resolu√ß√£o</td>
      <td contenteditable="true">‚Ä¢ Transcrevem os exerc√≠cios aos cadernos<br>‚Ä¢ Resolvem os exerc√≠cios no ${isClasseInicial ? 'livro do aluno' : 'caderno'} individualmente</td>
      <td>${criarSelectMetodo("Trabalho Independente")}</td>
      <td contenteditable="true">${isClasseInicial ? meiosEnsinoIniciais : 'Caderno, esferogr√°fica, livro do aluno'}</td>
    </tr>
    <tr data-funcao="Controlo e Avalia√ß√£o">
      <td>${escapeHtml(tempo4)}</td>
      <td>Controlo e Avalia√ß√£o</td>
      <td contenteditable="true">‚Ä¢ Corre√ß√£o dos exerc√≠cios<br>‚Ä¢ Breve resumo da aula<br>‚Ä¢ Marca√ß√£o do TPC</td>
      <td contenteditable="true">‚Ä¢ Corrige os exerc√≠cios apresentados<br>‚Ä¢ Resume os pontos principais<br>‚Ä¢ Faz a marca√ß√£o o TPC</td>
      <td contenteditable="true">‚Ä¢ Apresentam os exerc√≠cios corrigidos<br>‚Ä¢ Prestam aten√ß√£o e anotam o resumo<br>‚Ä¢ Anotam o TPC no ${isClasseInicial ? 'livro do aluno' : 'caderno'}</td>
      <td>${criarSelectMetodo("Trabalho Independente")}</td>
      <td contenteditable="true">${isClasseInicial ? meiosEnsinoIniciais : 'Quadro, caderno, esferogr√°fica, apagador'}</td>
    </tr>`;

  // Mostrar preview
  document.getElementById('planoFinal').style.display = 'block';
  document.getElementById('btnVoltarFormulario').style.display = 'inline-block'; // ‚Üê mostra bot√£o
  document.forms['planoForm'].style.display = 'none'; // ‚Üê esconde formul√°rio
  document.getElementById('avisoExportacao').style.display = 'block';
  setTimeout(()=>document.getElementById('avisoExportacao').style.display='none', 9000);

  // Salvar plano
  atualizarPlanoSalvo();
  mostrarMensagem('Plano gerado e salvo na sess√£o.');
  atualizarBotaoAnexoInferior();
}

/* ---------- Fun√ß√£o Voltar ao Formul√°rio ---------- */
function voltarAoFormulario() {
  const form = document.forms['planoForm'];
  form.style.display = 'block';
  document.getElementById('planoFinal').style.display = 'none';
  document.getElementById('btnVoltarFormulario').style.display = 'none';
}
function irParaPagamento() {
  const planoData = {
    escola: document.forms['planoForm'].escola.value,
    professor: document.forms['planoForm'].professor.value,
    disciplina: document.forms['planoForm'].disciplina.value,
    unidade: document.forms['planoForm'].unidade.value,
    tema: document.forms['planoForm'].tema.value,
    tipo: document.forms['planoForm'].tipo.value,
    classe: document.forms['planoForm'].classe.value,
    turma: document.forms['planoForm'].turma.value,
    licao: document.forms['planoForm'].licao.value,
    duracao: document.forms['planoForm'].duracao.value,
    data: document.forms['planoForm'].data.value,
    materiais: materiais,
    objetivos: document.getElementById('objetivosCampo').value,
    tabela: document.getElementById('tabelaPlano').outerHTML,
    anexoTipo: anexoSalvo ? anexoSalvo.tipo : null,
    anexoImagem: (anexoSalvo && anexoSalvo.tipo === 'imagem') ? anexoSalvo.data : null,
    anexoTexto: (anexoSalvo && anexoSalvo.tipo === 'texto') ? anexoSalvo.data : ""
  };

  // Salva os dados para o pagamento.html recuperar
  sessionStorage.setItem("planoData", JSON.stringify(planoData));

  // Vai para a tela de pagamento
  window.location.href = "pagamento.html";
        }
/* ---------- Adicionar Atividade ---------- */
function abrirNovoBloco(){
  const container = document.getElementById('novoBlocoContainer');
  container.innerHTML = '';
  const div = document.createElement('div');
  div.className = 'novoBloco';
  div.innerHTML = `
    <label>Escolha a Fun√ß√£o Did√°ctica:</label>
    <select id="seletorFuncaoAdd">
      <option>Introdu√ß√£o e Motiva√ß√£o</option>
      <option>Media√ß√£o e Assimila√ß√£o</option>
      <option>Dom√≠nio e Consolida√ß√£o</option>
      <option>Controlo e Avalia√ß√£o</option>
    </select>
    <label style="margin-top:8px">Conte√∫do (nova atividade):</label>
    <textarea id="conteudoNovo" style="height:60px;"></textarea>
    <label style="margin-top:6px">Atividade do professor:</label>
    <textarea id="profNovo" style="height:60px;"></textarea>
    <label style="margin-top:6px">Atividade dos alunos:</label>
    <textarea id="alunoNovo" style="height:60px;"></textarea>
    <div style="display:flex; gap:8px; margin-top:8px;">
      <button type="button" onclick="adicionarAtividadeAoBloco()">Adicionar</button>
    </div>`;
  container.appendChild(div);
}
</script>
